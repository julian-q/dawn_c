<!doctype html>
<html class="no-js" lang="en">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
<meta property="og:title" content="Normal mapping (🚧WIP)" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://eliemichel.github.io/basic-3d-rendering/lighting-and-material/normal-mapping.html" />
<meta property="og:site_name" content="Learn WebGPU for C++" />
<meta property="og:description" content="With webgpu.hpp Resulting code: step110 Vanilla webgpu.h Resulting code: step110-vanilla We have seen that the normal of a surface (i.e., the direction perpendicular to it) plays a key role in the ..." />
<meta property="og:image" content="https://eliemichel.github.io/images/webgpu-responsive.svg" />
<meta property="og:image:alt" content="Learn WebGPU for C++" />
<meta name="description" content="With webgpu.hpp Resulting code: step110 Vanilla webgpu.h Resulting code: step110-vanilla We have seen that the normal of a surface (i.e., the direction perpendicular to it) plays a key role in the ..." />
    <link rel="icon" type="image/svg+xml" href="../../_static/favicon/favicon.svg">
    <link rel="icon" sizes="16x16" href="../../_static/favicon/favicon-16x16.png" type="image/png">
    <link rel="icon" sizes="32x32" href="../../_static/favicon/favicon-32x32.png" type="image/png">
    <link rel="apple-touch-icon" sizes="180x180" href="https://eliemichel.github.io/LearnWebGPU/_static/favicon/apple-touch-icon-180x180.png" type="image/png"><link rel="index" title="Index" href="../../genindex.html" /><link rel="search" title="Search" href="../../search.html" /><link rel="next" title="Image-Based Lighting (🚧WIP)" href="ibl.html" /><link rel="prev" title="Specularity" href="specular.html" />

    <!-- Generated with Sphinx 5.3.0 and Furo 2023.03.27 -->
        <title>Normal mapping (🚧WIP) - Learn WebGPU for C++ documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo.css?digest=fad236701ea90a88636c2a8c73b44ae642ed2a53" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    <link rel="stylesheet" type="text/css" href="../../_static/extra.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx_literate.css" />
    
    


<style>
  body {
    --color-code-background: #eeffcc;
  --color-code-foreground: black;
  --color-brand-primary: #ac2800;
  --color-brand-content: #007cac;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #272822;
  --color-code-foreground: #f8f8f2;
  --color-brand-primary: #ce5733;
  --color-brand-content: #38a6b9;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #272822;
  --color-code-foreground: #f8f8f2;
  --color-brand-primary: #ce5733;
  --color-brand-content: #38a6b9;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<div class="announcement">
  <aside class="announcement-content">
     <em>Important</em> This documentation is a work in progress! <a href="../../appendices/feedback-needed.html">Feedback needed!</a> 
  </aside>
</div>

<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../index.html"><div class="brand">Learn WebGPU for C++  documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo only-light" src="../../_static/webgpu-light.svg" alt="Light Logo"/>
    <img class="sidebar-logo only-dark" src="../../_static/webgpu-dark.svg" alt="Dark Logo"/>
  </div>
  
  
</a><form class="sidebar-search-container" method="get" action="../../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html">Introduction</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../getting-started/index.html">Getting Started</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../getting-started/project-setup.html">Project setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../getting-started/opening-a-window.html">Opening a window</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../getting-started/hello-webgpu.html">Hello WebGPU</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../getting-started/the-adapter.html">The Adapter</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../getting-started/the-device.html">The Device</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../getting-started/the-command-queue.html">The Command Queue</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../getting-started/first-color.html">First Color</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../getting-started/cpp-idioms.html">C++ wrapper</a></li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="../index.html">Basic 3D Rendering</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../hello-triangle.html">Hello Triangle</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../input-geometry/index.html">Input Geometry</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../input-geometry/playing-with-buffers.html">Playing with buffers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../input-geometry/a-first-vertex-attribute.html">A first Vertex Attribute</a></li>
<li class="toctree-l3"><a class="reference internal" href="../input-geometry/multiple-attributes.html">Multiple Attributes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../input-geometry/index-buffer.html">Index Buffer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../input-geometry/loading-from-file.html">Loading from file</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../shader-uniforms/index.html">Shader Uniforms</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../shader-uniforms/a-first-uniform.html">A first uniform</a></li>
<li class="toctree-l3"><a class="reference internal" href="../shader-uniforms/multiple-uniforms.html">More uniforms</a></li>
<li class="toctree-l3"><a class="reference internal" href="../shader-uniforms/dynamic-uniforms.html">Dynamic uniforms</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../3d-meshes/index.html">3D Meshes</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../3d-meshes/a-simple-example.html">A simple example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../3d-meshes/depth-buffer.html">Depth buffer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../3d-meshes/transformation-matrices.html">Transformation matrices</a></li>
<li class="toctree-l3"><a class="reference internal" href="../3d-meshes/projection-matrices.html">Projection matrices</a></li>
<li class="toctree-l3"><a class="reference internal" href="../3d-meshes/basic-shading.html">Basic shading</a></li>
<li class="toctree-l3"><a class="reference internal" href="../3d-meshes/loading-from-file.html">Loading from file</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../texturing/index.html">Texturing</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../texturing/a-first-texture.html">A first texture</a></li>
<li class="toctree-l3"><a class="reference internal" href="../texturing/texture-mapping.html">Texture mapping</a></li>
<li class="toctree-l3"><a class="reference internal" href="../texturing/sampler.html">Sampler</a></li>
<li class="toctree-l3"><a class="reference internal" href="../texturing/loading-from-file.html">Loading from file</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../some-interaction/index.html">Some interaction</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../some-interaction/refactoring.html">Refactoring</a></li>
<li class="toctree-l3"><a class="reference internal" href="../some-interaction/resizing-window.html">Resizing the window</a></li>
<li class="toctree-l3"><a class="reference internal" href="../some-interaction/camera-control.html">Camera control</a></li>
<li class="toctree-l3"><a class="reference internal" href="../some-interaction/simple-gui.html">Simple GUI</a></li>
</ul>
</li>
<li class="toctree-l2 current has-children"><a class="reference internal" href="index.html">Lighting and Material</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="recap.html">Recap</a></li>
<li class="toctree-l3"><a class="reference internal" href="specular.html">Specularity</a></li>
<li class="toctree-l3 current current-page"><a class="current reference internal" href="normal-mapping.html#">Normal mapping (🚧WIP)</a></li>
<li class="toctree-l3"><a class="reference internal" href="ibl.html">Image-Based Lighting (🚧WIP)</a></li>
<li class="toctree-l3"><a class="reference internal" href="cubemap.html">Cube Maps (🚧WIP)</a></li>
<li class="toctree-l3"><a class="reference internal" href="pbr.html">Physically-Based Materials (🚧WIP)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../basic-compute/index.html">Basic Compute</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../basic-compute/compute-pipeline.html">Compute Pipeline</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../basic-compute/image-processing/index.html">Image Processing</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../basic-compute/image-processing/mipmap-generation.html">Mipmap Generation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../basic-compute/image-processing/convolution-filters.html">Convolution Filters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../basic-compute/image-processing/cubemap-conversion.html">Cubemap Conversion (🚧WIP)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../basic-compute/image-processing/cubemap-prefiltering.html">Cubemap Prefiltering (🚧WIP)</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../basic-compute/procedural-geometry/index.html">Procedural Geometry</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../basic-compute/procedural-geometry/deformation.html">Deformation (🚧WIP)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../basic-compute/neural-networks.html">Neural Networks (🛑TODO)</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../advanced-techniques/index.html">Advanced Techniques</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../advanced-techniques/raii.html">RAII</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../advanced-techniques/hdr-textures.html">High Dynamic Range Textures (🚧WIP)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../advanced-techniques/deferred-shading.html">Deferred Shading (🛑TODO)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../advanced-techniques/benchmarking.html">Benchmarking (🛑TODO)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../advanced-techniques/render-bundles.html">Render Bundles (🛑TODO)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../advanced-techniques/multi-sampling.html">Multi-Sampling (🛑TODO)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../advanced-techniques/scene-tree.html">Scene tree (🛑TODO)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../advanced-techniques/screen-capture.html">Screen capture (🚧WIP)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../advanced-techniques/shadow-maps.html">Shadow maps (🛑TODO)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../advanced-techniques/tesselation.html">Tesselation (🛑TODO)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../advanced-techniques/raytracing.html">Raytracing (🛑TODO)</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../appendices/index.html">Appendices</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/><label for="toctree-checkbox-13"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../appendices/teaching-native-graphics-in-2023.html">Teaching native graphics in 2023</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../appendices/feedback-needed.html">Feedback needed</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../appendices/debugging.html">Debugging (🚧WIP)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../appendices/building-for-the-web.html">Building for the Web (🚧WIP)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../appendices/memory-model.html">Memory Model (🛑TODO)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../appendices/custom-extensions.html">Custom Extensions (🚧WIP)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../appendices/references.html">References (🚧WIP)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../appendices/tmp.html">Temporary page</a></li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="normal-mapping.html#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="edit-this-page">
  <a class="muted-link" href="https://github.com/eliemichel/LearnWebGPU/edit/main/./basic-3d-rendering/lighting-and-material/normal-mapping.md" title="Edit this page">
    <svg aria-hidden="true" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <path d="M4 20h4l10.5 -10.5a1.5 1.5 0 0 0 -4 -4l-10.5 10.5v4" />
      <line x1="13.5" y1="6.5" x2="17.5" y2="10.5" />
    </svg>
    <span class="visually-hidden">Edit this page</span>
  </a>
</div><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section class="tex2jax_ignore mathjax_ignore" id="normal-mapping-wip">
<h1>Normal mapping (🚧WIP)<a class="headerlink" href="normal-mapping.html#normal-mapping-wip" title="Permalink to this heading">#</a></h1>
<div class="tab-set docutils">
<input checked="True" class="tab-input" id="tab-set--0-input--1" name="tab-set--0" type="radio"><label class="tab-label" for="tab-set--0-input--1">With webgpu.hpp</label><div class="tab-content docutils">
<p><em>Resulting code:</em> <a class="reference external" href="https://github.com/eliemichel/LearnWebGPU-Code/tree/step110"><code class="docutils literal notranslate"><span class="pre">step110</span></code></a></p>
</div>
<input class="tab-input" id="tab-set--0-input--2" name="tab-set--0" type="radio"><label class="tab-label" for="tab-set--0-input--2">Vanilla webgpu.h</label><div class="tab-content docutils">
<p><em>Resulting code:</em> <a class="reference external" href="https://github.com/eliemichel/LearnWebGPU-Code/tree/step110-vanilla"><code class="docutils literal notranslate"><span class="pre">step110-vanilla</span></code></a></p>
</div>
</div>
<p>We have seen that the <strong>normal</strong> of a surface (i.e., the direction perpendicular to it) plays a key role in the way the light bounces on it. <strong>Normal mapping</strong> consists in locally perturbing this normal depending on an input map (texture file) to <strong>model the effect of very small geometric details</strong>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>These <strong>micro details</strong> could in theory be represented by subdividing the mesh a lot and slightly moving some vertices, but for the scale that normal maps model, this approach is really not tractable.</p>
</div>
<img alt="../../_images/normal-mapping-equiv-light.svg" class="only-light align-center" src="../../_images/normal-mapping-equiv-light.svg" /><img alt="../../_images/normal-mapping-equiv-dark.svg" class="only-dark align-center" src="../../_images/normal-mapping-equiv-dark.svg" /><p class="align-center">
	<span class="caption-text"><em>Perturbing the normal of the original mesh is a way to represent micro-geometry without the need to refine the mesh.</em></span>
</p>
<section id="normal-map">
<h2>Normal map<a class="headerlink" href="normal-mapping.html#normal-map" title="Permalink to this heading">#</a></h2>
<p>There are different ways to provide the perturbed normals:</p>
<ul class="simple">
<li><p>Specify a perturbed normal at each vertex, and interpolate across the face. This is used to smooth out the boundaries between faces and thus create smooth surfaces, and we already have this.</p></li>
<li><p>Provide a texture that gives the perturbed normal. This is heavier but can bring a lot more details. This texture is called the <strong>normal map</strong>.</p></li>
</ul>
<img alt="../../_images/normal-map-light.png" class="only-light align-center" src="../../_images/normal-map-light.png" />
<img alt="../../_images/normal-map-dark.png" class="only-dark align-center" src="../../_images/normal-map-dark.png" />
<p class="align-center">
	<span class="caption-text"><em>The color of each pixel of a <strong>normal map</strong> encodes a normal vector. There are two convention for this encoding, called "DirectX" and "OpenGL" because they relate to how these APIs used to require the format.</em></span>
</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The conventions “DirectX” and “OpenGL” are no longer constraints from the graphics API because we will write ourselves in the shader how normal map pixels must be interpreted. These names comes from before we could write shaders.</p>
<p>For the rest of this document, <strong>we will follow the OpenGL convention.</strong></p>
</div>
<p>In order to use such a normal map, we need to:</p>
<ol class="arabic simple">
<li><p>Load the file as a texture and bind it to the shader.</p></li>
<li><p>Sample the texel and decode it into a normal vector</p></li>
<li><p>Transform this normal with respect to the orientation of the face</p></li>
</ol>
</section>
<section id="on-a-plane">
<h2>On a plane<a class="headerlink" href="normal-mapping.html#on-a-plane" title="Permalink to this heading">#</a></h2>
<p>Let us first focus on steps 1. and 2. by using a simple plane (so that there is no need for step 3.).</p>
<section id="setup">
<h3>Setup<a class="headerlink" href="normal-mapping.html#setup" title="Permalink to this heading">#</a></h3>
<p>Switch the loaded object to the plane:</p>
<div class="highlight-C++ notranslate"><div class="highlight"><pre><span></span><span class="kt">bool</span><span class="w"> </span><span class="n">success</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ResourceManager</span><span class="o">::</span><span class="n">loadGeometryFromObj</span><span class="p">(</span><span class="n">RESOURCE_DIR</span><span class="w"> </span><span class="s">&quot;/plane.obj&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">m_vertexData</span><span class="p">);</span>
</pre></div>
</div>
<p>For this example we use the <code class="docutils literal notranslate"><span class="pre">cobblestone_floor_08</span></code> material from <a class="reference external" href="https://polyhaven.com/a/cobblestone_floor_08">PolyHaven</a> (a nice source of materials that can be freely used by the way). We only look at the <a class="reference download internal" download="" href="../../_downloads/c69c56204b32f85418889a40235cf7f5/cobblestone_floor_08_diff_2k.jpg"><span class="xref download myst">diffuse</span></a> and <a class="reference download internal" download="" href="../../_downloads/5d69b9dffba8a2649b8c223d042347b7/cobblestone_floor_08_nor_gl_2k.png"><span class="xref download myst">normal</span></a> maps for now, and load them as textures:</p>
<div class="highlight-C++ notranslate"><div class="highlight"><pre><span></span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">initTexture</span><span class="p">(</span><span class="n">RESOURCE_DIR</span><span class="w"> </span><span class="s">&quot;/cobblestone_floor_08_diff_2k.jpg&quot;</span><span class="p">))</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">initTexture</span><span class="p">(</span><span class="n">RESOURCE_DIR</span><span class="w"> </span><span class="s">&quot;/cobblestone_floor_08_nor_gl_2k.png&quot;</span><span class="p">))</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
</pre></div>
</div>
<p>We also add this new binding to the shader (that <code class="docutils literal notranslate"><span class="pre">initTexture</span></code> set up on the C++ side), and note that this offsets the lighting uniform:</p>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="o">@</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="o">@</span><span class="n">binding</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="w"> </span><span class="n">var</span><span class="o">&lt;</span><span class="n">uniform</span><span class="o">&gt;</span><span class="w"> </span><span class="n">uLighting</span>:<span class="w"> </span><span class="nc">LightingUniforms</span><span class="p">;</span>
<span class="c1">//</span><span class="w">                 </span><span class="c1">^</span><span class="w"> </span><span class="c1">This</span><span class="w"> </span><span class="c1">was</span><span class="w"> </span><span class="c1">a</span><span class="w"> </span><span class="c1">3</span>
<span class="c1">//</span><span class="w"> </span><span class="c1">[...]</span>
<span class="o">@</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="o">@</span><span class="n">binding</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="w"> </span><span class="n">var</span><span class="w"> </span><span class="n">normalTexture</span>:<span class="w"> </span><span class="nc">texture_2d</span><span class="o">&lt;</span><span class="kt">f32</span><span class="o">&gt;</span><span class="p">;</span>
</pre></div>
</div>
<p>Increase the specular hardness and play with the view point so that you can highlight the problem with this texture:</p>
<figure class="align-center" id="id1">
<img alt="../../_images/no-normal-mapping.png" class="with-shadow" src="../../_images/no-normal-mapping.png" />
<figcaption>
<p><span class="caption-text">Without normal mapping, the cobblestone texture feels completely flat, which is odd for this material.</span><a class="headerlink" href="normal-mapping.html#id1" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
</section>
<section id="sampling-normals">
<h3>Sampling normals<a class="headerlink" href="normal-mapping.html#sampling-normals" title="Permalink to this heading">#</a></h3>
<p>The key moment where normal mapping intervenes is when evaluating the normal <code class="docutils literal notranslate"><span class="pre">N</span></code> in the <strong>fragment shader</strong>.</p>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="kd">let</span><span class="w"> </span><span class="n">N</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">normalize</span><span class="p">(</span><span class="k">in</span><span class="p">.</span><span class="n">normal</span><span class="p">);</span>
</pre></div>
</div>
<p>Instead of using the input normal, we sample the normal from the normal map:</p>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="c1">//</span><span class="w"> </span><span class="c1">Sample</span><span class="w"> </span><span class="c1">normal</span>
<span class="kd">let</span><span class="w"> </span><span class="n">encodedN</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">textureSample</span><span class="p">(</span><span class="n">normalTexture</span><span class="p">,</span><span class="w"> </span><span class="n">textureSampler</span><span class="p">,</span><span class="w"> </span><span class="k">in</span><span class="p">.</span><span class="n">uv</span><span class="p">).</span><span class="n">rgb</span><span class="p">;</span>
<span class="kd">let</span><span class="w"> </span><span class="n">N</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">normalize</span><span class="p">(</span><span class="n">encodedN</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">0.5</span><span class="p">);</span>
</pre></div>
</div>
<p>For each channel <span class="math notranslate nohighlight">\(r\)</span>, <span class="math notranslate nohighlight">\(g\)</span> and <span class="math notranslate nohighlight">\(b\)</span>, the sampled value lies in range <span class="math notranslate nohighlight">\((0,1)\)</span>, and we need to map it to range <span class="math notranslate nohighlight">\((-x,x)\)</span> to <strong>decode</strong> it. The value of <span class="math notranslate nohighlight">\(x\)</span> does not really matter since we then normalize the vector.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you are using the <strong>DirectX</strong> convention, you also need to <strong>flip</strong> the <span class="math notranslate nohighlight">\(Y\)</span> value (multiply by -1 after decoding).</p>
</div>
<figure class="align-center" id="id2">
<img alt="../../_images/with-normal-mapping.png" class="with-shadow" src="../../_images/with-normal-mapping.png" />
<figcaption>
<p><span class="caption-text">With normal mapping, the cobblestone material looks like it has a much more realistic relief.</span><a class="headerlink" href="normal-mapping.html#id2" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>Normal mapping is <strong>a powerful trick</strong>, but of course it is not fully equivalent to refining geometry. In particular, it <strong>cannot change the silhouette</strong> of the shape, so the illusion falls at grazing angles:</p>
<figure class="align-center" id="id3">
<img alt="../../_images/with-normal-mapping-grazing-angle.png" class="with-shadow" src="../../_images/with-normal-mapping-grazing-angle.png" />
<figcaption>
<p><span class="caption-text">At grazing angles, the normal mapping is not enough to give the feeling of relief to the material. More complex methods like <strong>relief mapping</strong> are needed here.</span><a class="headerlink" href="normal-mapping.html#id3" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you want to dim down the influence of the normal map, you can mix it with the original normal:</p>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="kd">let</span><span class="w"> </span><span class="n">normalMapStrength</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.5</span><span class="p">;</span><span class="w"> </span><span class="c1">//</span><span class="w"> </span><span class="c1">could</span><span class="w"> </span><span class="c1">be</span><span class="w"> </span><span class="c1">a</span><span class="w"> </span><span class="c1">uniform</span>
<span class="kd">let</span><span class="w"> </span><span class="n">N</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">normalize</span><span class="p">(</span><span class="n">mix</span><span class="p">(</span><span class="k">in</span><span class="p">.</span><span class="n">normal</span><span class="p">,</span><span class="w"> </span><span class="n">encodedN</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span><span class="w"> </span><span class="n">normalMapStrength</span><span class="p">));</span>
</pre></div>
</div>
</div>
</section>
</section>
<section id="on-a-mesh">
<h2>On a mesh<a class="headerlink" href="normal-mapping.html#on-a-mesh" title="Permalink to this heading">#</a></h2>
<section id="the-problem">
<h3>The problem<a class="headerlink" href="normal-mapping.html#the-problem" title="Permalink to this heading">#</a></h3>
<p>The orientation contained in the normal map is given <strong>relatively</strong> to the global normal of the face.</p>
<p>In the case of the plane, we could completely ignore the original normal <code class="docutils literal notranslate"><span class="pre">in.normal</span></code> because it matched the Z axis of the normal map. But for any non-horizontal face, we need to <strong>rotate the sampled normal</strong>.</p>
<p>You can for instance test with this <a class="reference download internal" download="" href="../../_downloads/a807bbb5c9ad69e555e25d70b1fcf26e/cylinder.obj"><span class="xref download myst"><code class="docutils literal notranslate"><span class="pre">cylinder.obj</span></code></span></a> model:</p>
<figure class="align-center" id="id4">
<img alt="../../_images/wrong-normals.png" class="with-shadow" src="../../_images/wrong-normals.png" />
<figcaption>
<p><span class="caption-text">Wrong normals: When sampling normals from texture (right), the overall lighting is off and very different from the effect of the input normal (left).</span><a class="headerlink" href="normal-mapping.html#id4" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>The problem becomes even clearer when we display the computed normals:</p>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="c1">//</span><span class="w"> </span><span class="c1">To</span><span class="w"> </span><span class="c1">debug</span><span class="w"> </span><span class="c1">normals,</span><span class="w"> </span><span class="c1">we</span><span class="w"> </span><span class="c1">map</span><span class="w"> </span><span class="c1">from</span><span class="w"> </span><span class="c1">range</span><span class="w"> </span><span class="c1">(-1,1)</span><span class="w"> </span><span class="c1">to</span><span class="w"> </span><span class="c1">(0,1).</span>
<span class="kd">let</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">N</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">0.5</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">0.5</span><span class="p">;</span>
</pre></div>
</div>
<figure class="align-center" id="id5">
<img alt="../../_images/wrong-normals-debug.png" class="with-shadow" src="../../_images/wrong-normals-debug.png" />
<figcaption>
<p><span class="caption-text">Wrong normals: The direction sampled from the normal map (right) should be rotated to be centered around the original surface normal (left).</span><a class="headerlink" href="normal-mapping.html#id5" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>Our key requirement for the rotation is that when the sampled normal is <span class="math notranslate nohighlight">\((0,0,1)\)</span>, the end normal vector corresponds to <code class="docutils literal notranslate"><span class="pre">in.normal</span></code>. We thus know what the <span class="math notranslate nohighlight">\(Z\)</span> axis of the normal space is, but still need to define a <span class="math notranslate nohighlight">\(X\)</span> and a <span class="math notranslate nohighlight">\(Y\)</span> to fully get a rotation.</p>
</section>
<section id="tangents-and-bitangents">
<h3>Tangents and bitangents<a class="headerlink" href="normal-mapping.html#tangents-and-bitangents" title="Permalink to this heading">#</a></h3>
<p>TODO</p>
<section id="vertex-attributes">
<h4>Vertex attributes<a class="headerlink" href="normal-mapping.html#vertex-attributes" title="Permalink to this heading">#</a></h4>
<p>TODO</p>
<p>We add vertex attributes:</p>
<div class="highlight-C++ notranslate"><div class="highlight"><pre><span></span><span class="c1">//</span><span class="w"> </span><span class="c1">In</span><span class="w"> </span><span class="c1">ResourceManager.h</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">VertexAttributes</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">vec3</span><span class="w"> </span><span class="n">position</span><span class="p">;</span>

<span class="w">    </span><span class="c1">//</span><span class="w"> </span><span class="c1">Texture</span><span class="w"> </span><span class="c1">mapping</span><span class="w"> </span><span class="c1">attributes</span><span class="w"> </span><span class="c1">represent</span><span class="w"> </span><span class="c1">the</span><span class="w"> </span><span class="c1">local</span><span class="w"> </span><span class="c1">frame</span><span class="w"> </span><span class="c1">in</span><span class="w"> </span><span class="c1">which</span>
<span class="w">    </span><span class="c1">//</span><span class="w"> </span><span class="c1">normals</span><span class="w"> </span><span class="c1">sampled</span><span class="w"> </span><span class="c1">from</span><span class="w"> </span><span class="c1">the</span><span class="w"> </span><span class="c1">normal</span><span class="w"> </span><span class="c1">map</span><span class="w"> </span><span class="c1">are</span><span class="w"> </span><span class="c1">expressed.</span>
<span class="w">    </span><span class="n">vec3</span><span class="w"> </span><span class="n">tangent</span><span class="p">;</span><span class="w"> </span><span class="c1">//</span><span class="w"> </span><span class="c1">X</span><span class="w"> </span><span class="c1">axis</span>
<span class="w">    </span><span class="n">vec3</span><span class="w"> </span><span class="n">bitangent</span><span class="p">;</span><span class="w"> </span><span class="c1">//</span><span class="w"> </span><span class="c1">Y</span><span class="w"> </span><span class="c1">axis</span>
<span class="w">    </span><span class="n">vec3</span><span class="w"> </span><span class="n">normal</span><span class="p">;</span><span class="w"> </span><span class="c1">//</span><span class="w"> </span><span class="c1">Z</span><span class="w"> </span><span class="c1">axis</span>

<span class="w">    </span><span class="n">vec3</span><span class="w"> </span><span class="n">color</span><span class="p">;</span>
<span class="w">    </span><span class="n">vec2</span><span class="w"> </span><span class="n">uv</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
<div class="highlight-C++ notranslate"><div class="highlight"><pre><span></span><span class="c1">//</span><span class="w"> </span><span class="c1">In</span><span class="w"> </span><span class="c1">Application.cpp</span>
<span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">VertexAttribute</span><span class="o">&gt;</span><span class="w"> </span><span class="n">vertexAttribs</span><span class="p">(</span><span class="mi">6</span><span class="p">);</span>
<span class="c1">//</span><span class="w">                                         </span><span class="c1">^</span><span class="w"> </span><span class="c1">This</span><span class="w"> </span><span class="c1">was</span><span class="w"> </span><span class="c1">a</span><span class="w"> </span><span class="c1">4</span>

<span class="c1">//</span><span class="w"> </span><span class="c1">[...]</span>

<span class="c1">//</span><span class="w"> </span><span class="c1">Tangent</span><span class="w"> </span><span class="c1">attribute</span>
<span class="n">vertexAttribs</span><span class="p">[</span><span class="mi">4</span><span class="p">].</span><span class="n">shaderLocation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span>
<span class="n">vertexAttribs</span><span class="p">[</span><span class="mi">4</span><span class="p">].</span><span class="n">format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">VertexFormat</span><span class="o">::</span><span class="n">Float32x3</span><span class="p">;</span>
<span class="n">vertexAttribs</span><span class="p">[</span><span class="mi">4</span><span class="p">].</span><span class="n">offset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">offsetof</span><span class="p">(</span><span class="n">VertexAttributes</span><span class="p">,</span><span class="w"> </span><span class="n">tangent</span><span class="p">);</span>

<span class="c1">//</span><span class="w"> </span><span class="c1">Bitangent</span><span class="w"> </span><span class="c1">attribute</span>
<span class="n">vertexAttribs</span><span class="p">[</span><span class="mi">5</span><span class="p">].</span><span class="n">shaderLocation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
<span class="n">vertexAttribs</span><span class="p">[</span><span class="mi">5</span><span class="p">].</span><span class="n">format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">VertexFormat</span><span class="o">::</span><span class="n">Float32x3</span><span class="p">;</span>
<span class="n">vertexAttribs</span><span class="p">[</span><span class="mi">5</span><span class="p">].</span><span class="n">offset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">offsetof</span><span class="p">(</span><span class="n">VertexAttributes</span><span class="p">,</span><span class="w"> </span><span class="n">bitangent</span><span class="p">);</span>
</pre></div>
</div>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span><span class="w"> </span><span class="nc">VertexInput</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">//</span><span class="w"> </span><span class="c1">[...]</span>
<span class="w">    </span><span class="o">@</span><span class="n">location</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="w"> </span><span class="n">tangent</span>:<span class="w"> </span><span class="nc">vec3</span><span class="o">&lt;</span><span class="kt">f32</span><span class="o">&gt;</span><span class="p">,</span>
<span class="w">    </span><span class="o">@</span><span class="n">location</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="w"> </span><span class="n">bitangent</span>:<span class="w"> </span><span class="nc">vec3</span><span class="o">&lt;</span><span class="kt">f32</span><span class="o">&gt;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Don’t forget to bump up the limits:</p>
<div class="highlight-C++ notranslate"><div class="highlight"><pre><span></span><span class="n">requiredLimits</span><span class="p">.</span><span class="n">limits</span><span class="p">.</span><span class="n">maxVertexAttributes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">6</span><span class="p">;</span>
<span class="c1">//</span><span class="w">                                          </span><span class="c1">^</span><span class="w"> </span><span class="c1">This</span><span class="w"> </span><span class="c1">was</span><span class="w"> </span><span class="c1">a</span><span class="w"> </span><span class="c1">4</span>
</pre></div>
</div>
</section>
<section id="computation">
<h4>Computation<a class="headerlink" href="normal-mapping.html#computation" title="Permalink to this heading">#</a></h4>
<p>TODO</p>
<p>We compute these tangent and bitangent vectors when loading the mesh, in a new <code class="docutils literal notranslate"><span class="pre">computeTextureFrameAttributes</span></code> private method of the <code class="docutils literal notranslate"><span class="pre">ResourceManager</span></code>:</p>
<div class="highlight-C++ notranslate"><div class="highlight"><pre><span></span><span class="c1">//</span><span class="w"> </span><span class="c1">In</span><span class="w"> </span><span class="c1">ResourceManager.h</span>
<span class="k">private</span><span class="o">:</span>
<span class="w">    </span><span class="c1">//</span><span class="w"> </span><span class="c1">Compute</span><span class="w"> </span><span class="c1">Tangent</span><span class="w"> </span><span class="c1">and</span><span class="w"> </span><span class="c1">Bitangent</span><span class="w"> </span><span class="c1">attributes</span><span class="w"> </span><span class="c1">from</span><span class="w"> </span><span class="c1">the</span><span class="w"> </span><span class="c1">normal</span><span class="w"> </span><span class="c1">and</span><span class="w"> </span><span class="c1">UVs.</span>
<span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="n">computeTextureFrameAttributes</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">VertexAttributes</span><span class="o">&gt;&amp;</span><span class="w"> </span><span class="n">vertexData</span><span class="p">);</span>
</pre></div>
</div>
<div class="highlight-C++ notranslate"><div class="highlight"><pre><span></span><span class="c1">//</span><span class="w"> </span><span class="c1">At</span><span class="w"> </span><span class="c1">the</span><span class="w"> </span><span class="c1">end</span><span class="w"> </span><span class="c1">of</span><span class="w"> </span><span class="c1">loadGeometryFromObj</span>
<span class="n">computeTextureFrameAttributes</span><span class="p">(</span><span class="n">vertexData</span><span class="p">);</span>
<span class="k">return</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
</pre></div>
</div>
<p>The exact procedure is once again a matter of <strong>convention</strong>, to be aligned to what authoring tools export.</p>
<div class="highlight-C++ notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="nf">ResourceManager::computeTextureFrameAttributes</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">VertexAttributes</span><span class="o">&gt;&amp;</span><span class="w"> </span><span class="n">vertexData</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">size_t</span><span class="w"> </span><span class="n">triangleCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">vertexData</span><span class="p">.</span><span class="n">size</span><span class="p">()</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
<span class="w">    </span><span class="c1">//</span><span class="w"> </span><span class="c1">We</span><span class="w"> </span><span class="c1">compute</span><span class="w"> </span><span class="c1">the</span><span class="w"> </span><span class="c1">local</span><span class="w"> </span><span class="c1">texture</span><span class="w"> </span><span class="c1">frame</span><span class="w"> </span><span class="c1">per</span><span class="w"> </span><span class="c1">triangle</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">triangleCount</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">t</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">VertexAttributes</span><span class="o">*</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">vertexData</span><span class="p">[</span><span class="mi">3</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">t</span><span class="p">];</span>

<span class="w">        </span><span class="c1">//</span><span class="w"> </span><span class="c1">Formulas</span><span class="w"> </span><span class="c1">from</span><span class="w"> </span><span class="c1">http://www.opengl-tutorial.org/intermediate-tutorials/tutorial-13-normal-mapping/</span>

<span class="w">        </span><span class="n">vec3</span><span class="w"> </span><span class="n">deltaPos1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">position</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">position</span><span class="p">;</span>
<span class="w">        </span><span class="n">vec3</span><span class="w"> </span><span class="n">deltaPos2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">v</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="n">position</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">position</span><span class="p">;</span>

<span class="w">        </span><span class="n">vec2</span><span class="w"> </span><span class="n">deltaUV1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">uv</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">uv</span><span class="p">;</span>
<span class="w">        </span><span class="n">vec2</span><span class="w"> </span><span class="n">deltaUV2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">v</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="n">uv</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">uv</span><span class="p">;</span>

<span class="w">        </span><span class="kt">float</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1.0f</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="n">deltaUV1</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">deltaUV2</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">deltaUV1</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">deltaUV2</span><span class="p">.</span><span class="n">x</span><span class="p">);</span>
<span class="w">        </span><span class="n">vec3</span><span class="w"> </span><span class="n">tangent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">deltaPos1</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">deltaUV2</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">deltaPos2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">deltaUV1</span><span class="p">.</span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">r</span><span class="p">;</span>
<span class="w">        </span><span class="n">vec3</span><span class="w"> </span><span class="n">bitangent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">deltaPos2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">deltaUV1</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">deltaPos1</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">deltaUV2</span><span class="p">.</span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">r</span><span class="p">;</span>
<span class="w">        </span>
<span class="w">        </span><span class="c1">//</span><span class="w"> </span><span class="c1">We</span><span class="w"> </span><span class="c1">assign</span><span class="w"> </span><span class="c1">these</span><span class="w"> </span><span class="c1">to</span><span class="w"> </span><span class="c1">the</span><span class="w"> </span><span class="c1">3</span><span class="w"> </span><span class="c1">corners</span><span class="w"> </span><span class="c1">of</span><span class="w"> </span><span class="c1">the</span><span class="w"> </span><span class="c1">triangle</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">k</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">k</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">k</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">vertexData</span><span class="p">[</span><span class="mi">3</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">k</span><span class="p">].</span><span class="n">tangent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tangent</span><span class="p">;</span>
<span class="w">            </span><span class="n">vertexData</span><span class="p">[</span><span class="mi">3</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">k</span><span class="p">].</span><span class="n">bitangent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bitangent</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="usage">
<h4>Usage<a class="headerlink" href="normal-mapping.html#usage" title="Permalink to this heading">#</a></h4>
<p>TODO</p>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span><span class="w"> </span><span class="nc">VertexOutput</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">//</span><span class="w"> </span><span class="c1">[...]</span>
<span class="w">    </span><span class="o">@</span><span class="n">location</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="w"> </span><span class="n">tangent</span>:<span class="w"> </span><span class="nc">vec3</span><span class="o">&lt;</span><span class="kt">f32</span><span class="o">&gt;</span><span class="p">,</span>
<span class="w">    </span><span class="o">@</span><span class="n">location</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="w"> </span><span class="n">bitangent</span>:<span class="w"> </span><span class="nc">vec3</span><span class="o">&lt;</span><span class="kt">f32</span><span class="o">&gt;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In the vertex shader:</p>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="n">out</span><span class="p">.</span><span class="n">tangent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">uMyUniforms</span><span class="p">.</span><span class="n">modelMatrix</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">vec4</span><span class="o">&lt;</span><span class="kt">f32</span><span class="o">&gt;</span><span class="p">(</span><span class="k">in</span><span class="p">.</span><span class="n">tangent</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">)).</span><span class="n">xyz</span><span class="p">;</span>
<span class="n">out</span><span class="p">.</span><span class="n">bitangent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">uMyUniforms</span><span class="p">.</span><span class="n">modelMatrix</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">vec4</span><span class="o">&lt;</span><span class="kt">f32</span><span class="o">&gt;</span><span class="p">(</span><span class="k">in</span><span class="p">.</span><span class="n">bitangent</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">)).</span><span class="n">xyz</span><span class="p">;</span>
<span class="n">out</span><span class="p">.</span><span class="n">normal</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">uMyUniforms</span><span class="p">.</span><span class="n">modelMatrix</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">vec4</span><span class="o">&lt;</span><span class="kt">f32</span><span class="o">&gt;</span><span class="p">(</span><span class="k">in</span><span class="p">.</span><span class="n">normal</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">)).</span><span class="n">xyz</span><span class="p">;</span>
</pre></div>
</div>
<p>In the fragment shader:</p>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="c1">//</span><span class="w"> </span><span class="c1">Sample</span><span class="w"> </span><span class="c1">normal</span>
<span class="kd">let</span><span class="w"> </span><span class="n">encodedN</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">textureSample</span><span class="p">(</span><span class="n">normalTexture</span><span class="p">,</span><span class="w"> </span><span class="n">textureSampler</span><span class="p">,</span><span class="w"> </span><span class="k">in</span><span class="p">.</span><span class="n">uv</span><span class="p">).</span><span class="n">rgb</span><span class="p">;</span>
<span class="kd">let</span><span class="w"> </span><span class="n">localN</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">encodedN</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">0.5</span><span class="p">;</span>
<span class="kd">let</span><span class="w"> </span><span class="n">rotation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mat3x3</span><span class="o">&lt;</span><span class="kt">f32</span><span class="o">&gt;</span><span class="p">(</span>
<span class="w">    </span><span class="n">normalize</span><span class="p">(</span><span class="k">in</span><span class="p">.</span><span class="n">tangent</span><span class="p">),</span>
<span class="w">    </span><span class="n">normalize</span><span class="p">(</span><span class="k">in</span><span class="p">.</span><span class="n">bitangent</span><span class="p">),</span>
<span class="w">    </span><span class="n">normalize</span><span class="p">(</span><span class="k">in</span><span class="p">.</span><span class="n">normal</span><span class="p">),</span>
<span class="p">);</span>
<span class="kd">let</span><span class="w"> </span><span class="n">rotatedN</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">normalize</span><span class="p">(</span><span class="n">rotation</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">localN</span><span class="p">);</span>
<span class="kd">let</span><span class="w"> </span><span class="n">N</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mix</span><span class="p">(</span><span class="k">in</span><span class="p">.</span><span class="n">normal</span><span class="p">,</span><span class="w"> </span><span class="n">rotatedN</span><span class="p">,</span><span class="w"> </span><span class="n">uLighting</span><span class="p">.</span><span class="n">normalMapStrength</span><span class="p">);</span>
</pre></div>
</div>
<figure class="align-center" id="id6">
<img alt="../../_images/fixed-normal-map.png" class="with-shadow" src="../../_images/fixed-normal-map.png" />
<figcaption>
<p><span class="caption-text">Fixed normal maps.</span><a class="headerlink" href="normal-mapping.html#id6" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>You can try with the fourareen boat using <a class="reference download internal" download="" href="../../_downloads/3ab197946ebbd3616bd27a52e1a965a9/fourareen2K_normals.png"><span class="xref download myst"><code class="docutils literal notranslate"><span class="pre">fourareen2K_normals.png</span></code></span></a>:</p>
<figure class="align-center" id="id7">
<img alt="../../_images/fourareen-normal-mapping.png" class="with-shadow" src="../../_images/fourareen-normal-mapping.png" />
<figcaption>
<p><span class="caption-text">The Fourareen boat with normal mapping.</span><a class="headerlink" href="normal-mapping.html#id7" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>(TODO: investigate why we still see some cracks and fireflies)</p>
</section>
</section>
</section>
<section id="conclusion">
<h2>Conclusion<a class="headerlink" href="normal-mapping.html#conclusion" title="Permalink to this heading">#</a></h2>
<p>To recap when normal mapping is about:</p>
<ul class="simple">
<li><p>We <strong>perturbate</strong> normals to <strong>emulate micro details</strong> without paying the cost of finer meshes.</p></li>
<li><p>We <strong>sample</strong> this perturbation from a <strong>normal map</strong>.</p></li>
<li><p>We need to <strong>combine</strong> this perturbation with the original normal by rotating the sampled value.</p></li>
</ul>
<div class="tab-set docutils">
<input checked="True" class="tab-input" id="tab-set--1-input--1" name="tab-set--1" type="radio"><label class="tab-label" for="tab-set--1-input--1">With webgpu.hpp</label><div class="tab-content docutils">
<p><em>Resulting code:</em> <a class="reference external" href="https://github.com/eliemichel/LearnWebGPU-Code/tree/step110"><code class="docutils literal notranslate"><span class="pre">step110</span></code></a></p>
</div>
<input class="tab-input" id="tab-set--1-input--2" name="tab-set--1" type="radio"><label class="tab-label" for="tab-set--1-input--2">Vanilla webgpu.h</label><div class="tab-content docutils">
<p><em>Resulting code:</em> <a class="reference external" href="https://github.com/eliemichel/LearnWebGPU-Code/tree/step110-vanilla"><code class="docutils literal notranslate"><span class="pre">step110-vanilla</span></code></a></p>
</div>
</div>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="ibl.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Image-Based Lighting (🚧WIP)</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="specular.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Specularity</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2022-2023, Élie Michel and contributors
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              <a class="muted-link " href="https://github.com/eliemichel/LearnWebGPU" aria-label="GitHub">
                <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path>
                </svg>
            </a>
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      <div class="toc-sticky toc-scroll">
	<div class="toc-title-container">
		<span class="toc-title">
			On this page
		</span>
	</div>
	<div class="toc-tree-container">
		<div class="toc-tree">
			<ul>
<li><a class="reference internal" href="normal-mapping.html#">Normal mapping (🚧WIP)</a><ul>
<li><a class="reference internal" href="normal-mapping.html#normal-map">Normal map</a></li>
<li><a class="reference internal" href="normal-mapping.html#on-a-plane">On a plane</a><ul>
<li><a class="reference internal" href="normal-mapping.html#setup">Setup</a></li>
<li><a class="reference internal" href="normal-mapping.html#sampling-normals">Sampling normals</a></li>
</ul>
</li>
<li><a class="reference internal" href="normal-mapping.html#on-a-mesh">On a mesh</a><ul>
<li><a class="reference internal" href="normal-mapping.html#the-problem">The problem</a></li>
<li><a class="reference internal" href="normal-mapping.html#tangents-and-bitangents">Tangents and bitangents</a><ul>
<li><a class="reference internal" href="normal-mapping.html#vertex-attributes">Vertex attributes</a></li>
<li><a class="reference internal" href="normal-mapping.html#computation">Computation</a></li>
<li><a class="reference internal" href="normal-mapping.html#usage">Usage</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="normal-mapping.html#conclusion">Conclusion</a></li>
</ul>
</li>
</ul>

		</div>
	</div>
	
</div>
    </aside>
  </div>
</div><script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/scripts/furo.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/tabs.js"></script>
    <script src="../../_static/sphinx_literate.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    </body>
</html>